<nz-dropdown nzPlacement="bottomRight">
    <div class="item d-flex align-items-center px-sm" nz-dropdown>
        <nz-avatar [nzSrc]="settings.user.avatar" nzSize="small" class="mr-sm"></nz-avatar>
        {{settings.user.name}}
    </div>
    <div nz-menu class="width-sm">
        <div nz-menu-item (click)="showPwd()"><i class="anticon anticon-setting mr-sm"></i>修改密码</div>
        <li nz-menu-divider></li>
        <div nz-menu-item (click)="logout()"><i class="anticon anticon-setting mr-sm"></i>退出登录</div>
    </div>
</nz-dropdown>
<nz-modal [nzVisible]="isVisible" [nzTitle]="'修改密码'" [nzContent]="modalContent" (nzOnCancel)="cancel()" (nzOnOk)="confirm()">
    <ng-template #modalContent>
        <form [formGroup]="pwdForm" nz-form>
            <div nz-row>
                <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
                    <label>用户名</label>
                </div>
                <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
                    {{settings.user.name}}
                </div>
            </div>
            <div nz-row>
                <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
                    <label nz-form-item-required>当前密码</label>
                </div>
                <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
                    <nz-input formControlName="oldPassword" [nzType]="'password'" [nzId]="'oldPassword'" [nzSize]="'small'"></nz-input>
                    <div nz-form-explain *ngIf="getFormControl('oldPassword').dirty&&getFormControl('oldPassword').hasError('required')">
                        请输入原密码!
                    </div>
                </div>
            </div>
            <div nz-row>
                <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
                    <label nz-form-item-required>新密码</label>
                </div>
                <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
                    <nz-input formControlName="newPassword" [nzType]="'password'" [nzId]="'newPassword'" [nzSize]="'small'"></nz-input>
                    <div nz-form-explain *ngIf="getFormControl('newPassword').dirty&&getFormControl('newPassword').hasError('required')">
                        请输入新密码!
                    </div>
                    <div *ngIf="pwdDiff">
                        新密码与确认密码不一致!
                    </div>
                </div>
            </div>
            <div nz-row>
                <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
                    <label nz-form-item-required>确认新密码</label>
                </div>
                <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
                    <nz-input formControlName="confirmPassword" [nzType]="'password'" [nzId]="'confirmPassword'" [nzSize]="'small'"></nz-input>
                    <div nz-form-explain *ngIf="getFormControl('confirmPassword').dirty&&getFormControl('confirmPassword').hasError('required')">
                        请确认新密码!
                    </div>
                    <div *ngIf="pwdDiff">
                        新密码与确认密码不一致!
                    </div>
                </div>
            </div>
        </form>
    </ng-template>
</nz-modal>